(function($){'use strict';var methods={init:function(options){var i,clearlink,items,match,filter,filtertext,that=this,settings;$.expr[':'].icontains=function(obj,index,meta,stack){return(obj.textContent||obj.innerText||jQuery(obj).text()||'').toLowerCase().indexOf(meta[3].toLowerCase())>=0};that.settings=$.extend({'filter':null,'clearlink':null,'alternate':null,'alternateclass':'alternate'},options);that.items=that.children('div, li');if(that.settings.filter){filter=that.settings.filter}else{filter=$('<input></input>',{type:"text"}).prependTo(this)}if(that.settings.clearlink){clearlink=that.settings.clearlink}else{clearlink=$('<a style="display:none">Clear</a>').insertAfter(filter)}if(that.settings.alternate){that.items.filter(':odd').addClass(that.settings.alternateclass)}filter.change(function(){filtertext=filter.val();that.items.hide();if(that.settings.alternate){that.items.removeClass(that.settings.alternateclass)}if(filtertext.length<1){match=that.items}else{match=that.items.filter(':icontains('+filtertext+')')}if(that.settings.alternate){match.filter(':odd').addClass(that.settings.alternateclass)}match.show()}).on('keyup',function(){filter.change()});clearlink.on('click',function(){filter.val('').change()});return this},refresh:function(){var that=this,filtertext,filter,match;that.items=that.children('div, li');if(that.settings.alternate){that.items.removeClass(that.settings.alternateclass);filter=that.settings.filter;filtertext=filter.val();if(filtertext.length>0){match=that.items.filter(':icontains('+filtertext+')');match.filter(':odd').addClass(that.settings.alternateclass)}else{that.items.filter(':odd').addClass(that.settings.alternateclass)}}}};$.fn.listfilter=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{$.error('Method '+method+' not available')}}})(jQuery);
